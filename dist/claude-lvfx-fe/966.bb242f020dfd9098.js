"use strict";(self.webpackChunkclaude_lvfx_fe=self.webpackChunkclaude_lvfx_fe||[]).push([[966],{966:(at,R,u)=>{u.r(R),u.d(R,{ProductionsModule:()=>st});var l=u(177),c=u(9417),f=u(9012),$=u(8709),F=u(6850),b=u(9213),p=u(8834),O=u(5596),E=u(4823),_=u(9183),e=u(4438),m=u(5312),S=u(1626);let v=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/productions`}getProductions(){return this.http.get(this.apiUrl)}getProduction(t){return this.http.get(`${this.apiUrl}/${t}`)}createProduction(t){return this.http.post(this.apiUrl,t)}updateProduction(t,o){return this.http.put(`${this.apiUrl}/${t}`,o)}deleteProduction(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),V=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/scripts`}getScripts(){return this.http.get(this.apiUrl)}getScriptsByProduction(t){return this.http.get(`${m.c.apiUrl}/productions/${t}/scripts`)}getScript(t){return this.http.get(`${this.apiUrl}/${t}`)}createScript(t){return this.http.post(this.apiUrl,t)}updateScript(t,o){return this.http.put(`${this.apiUrl}/${t}`,o)}deleteScript(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Y=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/production-users`}getProductionUsers(){return this.http.get(this.apiUrl)}getProductionUsersByProduction(t){return this.http.get(`${m.c.apiUrl}/productions/${t}/users`)}getProductionsByUser(t){return this.http.get(`${m.c.apiUrl}/users/${t}/productions`)}getProductionUser(t){return this.http.get(`${this.apiUrl}/${t}`)}createProductionUser(t){return this.http.post(this.apiUrl,t)}updateProductionUser(t,o){return this.http.put(`${this.apiUrl}/${t}`,o)}deleteProductionUser(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var T=u(5351),h=u(5416);const X=(i,d,t,o,n)=>({"bg-success":i,"bg-warning":d,"bg-danger":t,"bg-info":o,"bg-secondary":n}),H=i=>["/productions",i,"overview"],Q=i=>["/productions",i,"breakdown"],z=i=>["/productions",i,"budget"];function J(i,d){1&i&&(e.j41(0,"div",6),e.nrm(1,"mat-spinner",7),e.j41(2,"p",8),e.EFF(3,"Loading production details..."),e.k0s()())}function K(i,d){if(1&i&&(e.j41(0,"div",9),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.error," ")}}function Z(i,d){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"div",10)(2,"div")(3,"button",11),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.backToList())}),e.j41(4,"mat-icon"),e.EFF(5,"arrow_back"),e.k0s()(),e.j41(6,"h1",12),e.EFF(7),e.k0s(),e.j41(8,"span",13),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.editProduction())}),e.j41(12,"mat-icon"),e.EFF(13,"edit"),e.k0s(),e.EFF(14," Edit "),e.k0s(),e.j41(15,"button",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteProduction())}),e.j41(16,"mat-icon"),e.EFF(17,"delete"),e.k0s(),e.EFF(18," Delete "),e.k0s()()(),e.j41(19,"nav",16)(20,"a",17,0),e.EFF(22," Overview "),e.k0s(),e.j41(23,"a",17,1),e.EFF(25," Breakdown "),e.k0s(),e.j41(26,"a",17,2),e.EFF(28," Budget "),e.k0s()(),e.nrm(29,"router-outlet"),e.k0s()}if(2&i){const t=e.sdS(21),o=e.sdS(24),n=e.sdS(27),s=e.XpG();e.R7$(7),e.JRh(s.production.title),e.R7$(),e.Y8G("ngClass",e.s1E(9,X,"active"===s.production.status,"pre-production"===s.production.status,"cancelled"===s.production.status,"completed"===s.production.status,!s.production.status)),e.R7$(),e.SpI(" ",s.production.status||"No Status"," "),e.R7$(11),e.Y8G("routerLink",e.eq3(15,H,s.productionId))("active",t.isActive),e.R7$(3),e.Y8G("routerLink",e.eq3(17,Q,s.productionId))("active",o.isActive),e.R7$(3),e.Y8G("routerLink",e.eq3(19,z,s.productionId))("active",n.isActive)}}let D=(()=>{class i{constructor(t,o,n,s,r,a,rt){this.route=t,this.router=o,this.productionService=n,this.scriptService=s,this.productionUserService=r,this.dialog=a,this.snackBar=rt,this.production=null,this.scripts=[],this.productionUsers=[],this.productionId=0,this.loading=!0,this.error=""}ngOnInit(){this.route.paramMap.subscribe(t=>{const o=t.get("id");o?(this.productionId=+o,this.loadProductionData(+o)):(this.error="No production ID provided",this.loading=!1)})}loadProductionData(t){this.loading=!0,this.productionService.getProduction(t).subscribe({next:o=>{this.production=o,this.loadRelatedData(t)},error:o=>{this.error=o.message||"Failed to load production data",this.loading=!1}})}loadRelatedData(t){this.scriptService.getScriptsByProduction(t).subscribe({next:o=>{this.scripts=o},error:o=>{console.error("Error loading scripts:",o)}}),this.productionUserService.getProductionUsersByProduction(t).subscribe({next:o=>{this.productionUsers=o,this.loading=!1},error:o=>{console.error("Error loading production users:",o),this.loading=!1}})}editProduction(){this.production&&this.router.navigate(["/productions",this.production.id,"edit"])}deleteProduction(){this.production&&this.dialog.open($.w,{width:"400px",data:{title:"Delete Production",message:`Are you sure you want to delete "${this.production.title}"? This action cannot be undone and will remove all associated data.`}}).afterClosed().subscribe(o=>{o&&this.productionService.deleteProduction(this.production.id).subscribe({next:()=>{this.snackBar.open("Production deleted successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/productions"])},error:n=>{this.snackBar.open(n.message||"Failed to delete production","Close",{duration:5e3,panelClass:["error-snackbar"]})}})})}createNewScript(){this.router.navigate(["/scripts/new"],{queryParams:{productionId:this.productionId}})}viewScript(t){this.router.navigate(["/scripts",t])}addUser(){this.router.navigate(["/productions",this.productionId,"users","new"])}backToList(){this.router.navigate(["/productions"])}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(f.nX),e.rXU(f.Ix),e.rXU(v),e.rXU(V),e.rXU(Y),e.rXU(T.bZ),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-production-details"]],standalone:!0,features:[e.aNF],decls:4,vars:3,consts:[["rlaOverview","routerLinkActive"],["rlaBreakdown","routerLinkActive"],["rlaBudget","routerLinkActive"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[1,"text-center","my-5"],["diameter","50",1,"mx-auto"],[1,"mt-3"],[1,"alert","alert-danger"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["mat-icon-button","","color","primary","matTooltip","Back to Productions",3,"click"],[1,"d-inline-block","ms-2","mb-0"],[1,"badge","ms-3",3,"ngClass"],["mat-raised-button","","color","primary",1,"me-2",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-tab-nav-bar","",1,"production-tabs"],["mat-tab-link","","routerLinkActive","",1,"production-tab",3,"routerLink","active"]],template:function(o,n){1&o&&(e.j41(0,"div"),e.DNE(1,J,4,0,"div",3)(2,K,2,1,"div",4)(3,Z,30,21,"div",5),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error&&!n.loading),e.R7$(),e.Y8G("ngIf",n.production&&!n.loading))},dependencies:[l.MD,l.YU,l.bT,F.RI,F.Bu,F.Ql,b.m_,b.An,p.Hl,p.$z,p.iY,O.Hu,E.uc,E.oV,_.D6,_.LG,f.iI,f.n3,f.Wk,f.wQ],styles:[".production-tabs,.production-tabs .mat-mdc-tab-links{background-color:#0b0c0e}.production-tab{color:#818181;cursor:pointer}.production-tab.mat-mdc-tab-link-active{color:#e1a32e;border-bottom:2px solid #E1A32E}.production-tab:hover{color:#fff}\n"],encapsulation:2})}}return i})();var W=u(740);const ee=["*"];function te(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",1),e.bIt("click",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.onOverlayClick(n))}),e.j41(1,"div",2),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.j41(2,"div",3)(3,"h3"),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.EFF(6,"\xd7"),e.k0s()(),e.j41(7,"div",5),e.SdG(8),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(4),e.JRh(t.title)}}let I=(()=>{class i{set isOpen(t){this._isOpen=t,this.cdr&&this.cdr.detectChanges()}get isOpen(){return this._isOpen}constructor(t){this.cdr=t,this.title="Modal Title",this._isOpen=!1,this.close=new e.bkB}closeModal(){this.isOpen=!1,this.close.emit()}onOverlayClick(t){this.closeModal()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-modal"]],inputs:{title:"title",isOpen:"isOpen"},outputs:{close:"close"},standalone:!0,features:[e.aNF],ngContentSelectors:ee,decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"]],template:function(o,n){1&o&&(e.NAR(),e.DNE(0,te,9,1,"div",0)),2&o&&e.Y8G("ngIf",n.isOpen)},dependencies:[l.MD,l.bT],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;width:400px;border-radius:8px;box-shadow:0 5px 15px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:1.2rem}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}"]})}}return i})(),B=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/productions`}getScenes(){return this.http.get(this.apiUrl)}getScenesBySequence(t,o){return this.http.get(`${this.apiUrl}/${t}/sequences/${o}/scenes`)}getScene(t){return this.http.get(`${this.apiUrl}/${t}`)}createScene(t,o,n){return this.http.post(`${this.apiUrl}/${t}/sequences/${o}/scenes`,n)}updateScene(t,o,n,s){return this.http.put(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}`,s)}deleteScene(t,o,n){return this.http.delete(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),P=(()=>{class i{constructor(t,o){this.sceneService=t,this.snackBar=o,this.sceneCreated=new e.bkB,this.newScene={number:1,location:"",int_ext:"",day_night:"",description:"",length:""}}createScene(){if(!this.newScene.location||!this.newScene.number)return;const t={...this.newScene,sequenceId:this.sequenceId,productionId:this.productionId};this.sceneService.createScene(this.productionId,this.sequenceId,t).subscribe({next:()=>{this.snackBar.open("Scene added","Close",{duration:3e3}),this.resetForm(),this.sceneCreated.emit()},error:()=>{this.snackBar.open("Failed to add scene","Close",{duration:3e3})}})}resetForm(){this.newScene={number:1,location:"",int_ext:"",day_night:"",description:"",length:""}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(B),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-scene-new"]],inputs:{sequenceId:"sequenceId",productionId:"productionId"},outputs:{sceneCreated:"sceneCreated"},standalone:!0,features:[e.aNF],decls:31,vars:6,consts:[["sceneForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["for","sceneNumber",1,"form-label"],["type","number","id","sceneNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sceneIntExt",1,"form-label"],["id","sceneIntExt","name","intExt","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","interior"],["value","exterior"],["for","sceneLocation",1,"form-label"],["type","text","id","sceneLocation","name","location","required","","placeholder","Scene location",1,"form-control",3,"ngModelChange","ngModel"],["for","sceneLength",1,"form-label"],["type","text","id","sceneLength","name","length","placeholder","1/8",1,"form-control",3,"ngModelChange","ngModel"],["for","sceneTimeOfDay",1,"form-label"],["type","text","id","sceneTimeOfDay","name","timeOfDay","placeholder","Time of Day",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.createScene())}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Number"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newScene.number,a)||(n.newScene.number=a),e.Njj(a)}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"INT/EXT"),e.k0s(),e.j41(9,"select",6),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newScene.int_ext,a)||(n.newScene.int_ext=a),e.Njj(a)}),e.j41(10,"option",7),e.EFF(11,"Select INT/EXT"),e.k0s(),e.j41(12,"option",8),e.EFF(13,"Interior"),e.k0s(),e.j41(14,"option",9),e.EFF(15,"Exterior"),e.k0s()()(),e.j41(16,"div",2)(17,"label",10),e.EFF(18,"Location"),e.k0s(),e.j41(19,"input",11),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newScene.location,a)||(n.newScene.location=a),e.Njj(a)}),e.k0s()(),e.j41(20,"div",2)(21,"label",12),e.EFF(22,"Scene Length"),e.k0s(),e.j41(23,"input",13),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newScene.length,a)||(n.newScene.length=a),e.Njj(a)}),e.k0s()(),e.j41(24,"div",2)(25,"label",14),e.EFF(26,"Time of Day"),e.k0s(),e.j41(27,"input",15),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newScene.day_night,a)||(n.newScene.day_night=a),e.Njj(a)}),e.k0s()(),e.j41(28,"div",16)(29,"button",17),e.EFF(30," Add Scene "),e.k0s()()()}if(2&o){const s=e.sdS(1);e.R7$(5),e.R50("ngModel",n.newScene.number),e.R7$(4),e.R50("ngModel",n.newScene.int_ext),e.R7$(10),e.R50("ngModel",n.newScene.location),e.R7$(4),e.R50("ngModel",n.newScene.length),e.R7$(4),e.R50("ngModel",n.newScene.day_night),e.R7$(2),e.Y8G("disabled",!s.valid)}},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})(),ne=(()=>{class i{constructor(t,o){this.sceneService=t,this.snackBar=o,this.sceneUpdated=new e.bkB,this.selectedElement={number:0,location:"",int_ext:"",day_night:"",description:"",length:""},this.showEditModal=!1}ngOnChanges(){this.scene&&(this.selectedElement={...this.scene})}updateScene(){!this.selectedElement||!this.selectedElement.id||(!this.selectedElement.productionId&&this.scene.productionId&&(this.selectedElement.productionId=this.scene.productionId),this.sceneService.updateScene(this.productionId,this.sequenceId,this.selectedElement.id,this.selectedElement).subscribe({next:()=>{this.snackBar.open("Scene updated","Close",{duration:3e3}),this.sceneUpdated.emit(),this.showEditModal=!1},error:t=>{console.error("Error updating scene:",t),this.snackBar.open("Failed to update scene","Close",{duration:3e3})}}))}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(B),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-scene-edit"]],inputs:{scene:"scene",sequenceId:"sequenceId",productionId:"productionId"},outputs:{sceneUpdated:"sceneUpdated"},standalone:!0,features:[e.OA$,e.aNF],decls:32,vars:5,consts:[[3,"ngSubmit"],[1,"mb-3"],["for","editNumber",1,"form-label"],["type","number","id","editNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editIntExt",1,"form-label"],["id","editIntExt","name","intExt","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","interior"],["value","exterior"],["for","editLocation",1,"form-label"],["type","text","id","editLocation","name","location","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editTimeOfDay",1,"form-label"],["type","text","id","editTimeOfDay","name","timeOfDay",1,"form-control",3,"ngModelChange","ngModel"],["for","editLength",1,"form-label"],["type","text","id","editLength","name","length","placeholder","1/8",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary"]],template:function(o,n){1&o&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return n.updateScene()}),e.j41(1,"div",1)(2,"label",2),e.EFF(3,"Number"),e.k0s(),e.j41(4,"input",3),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.number,r)||(n.selectedElement.number=r),r}),e.k0s()(),e.j41(5,"div",1)(6,"label",4),e.EFF(7,"INT/EXT"),e.k0s(),e.j41(8,"select",5),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.int_ext,r)||(n.selectedElement.int_ext=r),r}),e.j41(9,"option",6),e.EFF(10,"Select INT/EXT"),e.k0s(),e.j41(11,"option",7),e.EFF(12,"INT"),e.k0s(),e.j41(13,"option",8),e.EFF(14,"EXT"),e.k0s()()(),e.j41(15,"div",1)(16,"label",9),e.EFF(17,"Location"),e.k0s(),e.j41(18,"input",10),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.location,r)||(n.selectedElement.location=r),r}),e.k0s()(),e.j41(19,"div",1)(20,"label",11),e.EFF(21,"Time of Day"),e.k0s(),e.j41(22,"input",12),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.day_night,r)||(n.selectedElement.day_night=r),r}),e.k0s()(),e.j41(23,"div",1)(24,"label",13),e.EFF(25,"Scene Length"),e.k0s(),e.j41(26,"input",14),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.length,r)||(n.selectedElement.length=r),r}),e.k0s()(),e.j41(27,"div",15)(28,"button",16),e.bIt("click",function(){return n.sceneUpdated.emit()}),e.EFF(29,"Cancel"),e.k0s(),e.j41(30,"button",17),e.EFF(31,"Save"),e.k0s()()()),2&o&&(e.R7$(4),e.R50("ngModel",n.selectedElement.number),e.R7$(4),e.R50("ngModel",n.selectedElement.int_ext),e.R7$(10),e.R50("ngModel",n.selectedElement.location),e.R7$(4),e.R50("ngModel",n.selectedElement.day_night),e.R7$(4),e.R50("ngModel",n.selectedElement.length))},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})(),w=(()=>{class i{constructor(){this.addLabel="Add New",this.add=new e.bkB,this.edit=new e.bkB,this.delete=new e.bkB}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-crud-dropdown"]],inputs:{entityLabel:"entityLabel",elementId:"elementId",addLabel:"addLabel"},outputs:{add:"add",edit:"edit",delete:"delete"},standalone:!0,features:[e.aNF],decls:20,vars:6,consts:[[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"crud-dropdown-btn",3,"id"],[1,"dropdown-menu","crud-dropdown-menu"],[1,"dropdown-item","add-btn",3,"click"],[1,"dropdown-item","edit-btn",3,"click"],[1,"dropdown-item","delete-btn",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"button",1)(2,"mat-icon"),e.EFF(3,"more_horiz"),e.k0s()(),e.j41(4,"ul",2)(5,"li")(6,"button",3),e.bIt("click",function(){return n.add.emit()}),e.j41(7,"mat-icon"),e.EFF(8,"add"),e.k0s(),e.EFF(9),e.k0s()(),e.j41(10,"li")(11,"button",4),e.bIt("click",function(){return n.edit.emit()}),e.j41(12,"mat-icon"),e.EFF(13,"edit"),e.k0s(),e.EFF(14),e.k0s()(),e.j41(15,"li")(16,"button",5),e.bIt("click",function(){return n.delete.emit()}),e.j41(17,"mat-icon"),e.EFF(18,"delete"),e.k0s(),e.EFF(19),e.k0s()()()()),2&o&&(e.R7$(),e.Y8G("id","crud-"+n.elementId+"-options"),e.BMQ("aria-labelledby","crud-"+n.elementId+"-options"),e.R7$(3),e.BMQ("aria-labelledby","crud-"+n.elementId+"-options"),e.R7$(5),e.SpI(" ",n.addLabel," "),e.R7$(5),e.SpI(" Edit ",n.entityLabel," "),e.R7$(5),e.SpI(" Delete ",n.entityLabel," "))},dependencies:[l.MD,b.m_,b.An],styles:[".crud-dropdown-btn[_ngcontent-%COMP%]{color:#fff;cursor:pointer;background-color:transparent;border:none}.add-btn[_ngcontent-%COMP%]:hover{background-color:#cc6}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#89f}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c44}.crud-dropdown-menu[_ngcontent-%COMP%]{background-color:#0b0c0e;padding:0!important;overflow:hidden;border-radius:24px 0 0 24px}.crud-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-family:Comfortaa,cursive;font-size:16px;font-weight:500;transition:.3s ease;color:#fff}.crud-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-top:3px}.crud-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transition:.3s ease;transform:scale(1.1)}.crud-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transition:.3s ease}"]})}}return i})(),M=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/productions`}getActionBeats(t,o,n){return this.http.get(`${this.apiUrl}/${n}/sequences/${o}/scenes/${t}/action_beats`)}getActionBeatsByScene(t){return this.http.get(`${m.c.apiUrl}/scenes/${t}/action_beats`)}getActionBeat(t){return this.http.get(`${this.apiUrl}/${t}`)}createActionBeat(t){const{productionId:o,sequenceId:n,sceneId:s}=t;return this.http.post(`${this.apiUrl}/${o}/sequences/${n}/scenes/${s}/action_beats`,t)}updateActionBeat(t,o,n,s,r){return this.http.put(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}`,r)}deleteActionBeat(t,o,n,s){return this.http.delete(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),oe=(()=>{class i{constructor(t,o){this.actionBeatService=t,this.snackBar=o,this.actionBeatCreated=new e.bkB,this.newActionBeat={number:1,description:"",text:"",beat_type:"action"}}createActionBeat(){if(!this.newActionBeat.description&&!this.newActionBeat.text||!this.newActionBeat.number)return;!this.newActionBeat.text&&this.newActionBeat.description&&(this.newActionBeat.text=this.newActionBeat.description);const t={...this.newActionBeat,sceneId:this.sceneId,sequenceId:this.sequenceId,productionId:this.productionId};this.actionBeatService.createActionBeat(t).subscribe({next:()=>{this.snackBar.open("Action Beat added","Close",{duration:3e3}),this.resetForm(),this.actionBeatCreated.emit()},error:o=>{console.error("Failed to add action beat:",o),this.snackBar.open("Failed to add action beat","Close",{duration:3e3})}})}resetForm(){this.newActionBeat={number:1,description:"",text:"",beat_type:"action"}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(M),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-action-beat-new"]],inputs:{sceneId:"sceneId",sequenceId:"sequenceId",productionId:"productionId"},outputs:{actionBeatCreated:"actionBeatCreated"},standalone:!0,features:[e.aNF],decls:21,vars:4,consts:[["actionBeatForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["for","actionBeatNumber",1,"form-label"],["type","number","id","actionBeatNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","actionBeatType",1,"form-label"],["id","actionBeatType","name","beat_type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","action"],["value","dialogue"],["for","actionBeatDescription",1,"form-label"],["id","actionBeatDescription","name","description","required","","placeholder","Action beat description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.createActionBeat())}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Number"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newActionBeat.number,a)||(n.newActionBeat.number=a),e.Njj(a)}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"Type"),e.k0s(),e.j41(9,"select",6),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newActionBeat.beat_type,a)||(n.newActionBeat.beat_type=a),e.Njj(a)}),e.j41(10,"option",7),e.EFF(11,"Action"),e.k0s(),e.j41(12,"option",8),e.EFF(13,"Dialogue"),e.k0s()()(),e.j41(14,"div",2)(15,"label",9),e.EFF(16,"Description"),e.k0s(),e.j41(17,"textarea",10),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newActionBeat.description,a)||(n.newActionBeat.description=a),e.Njj(a)}),e.k0s()(),e.j41(18,"div",11)(19,"button",12),e.EFF(20," Add Action Beat "),e.k0s()()()}if(2&o){const s=e.sdS(1);e.R7$(5),e.R50("ngModel",n.newActionBeat.number),e.R7$(4),e.R50("ngModel",n.newActionBeat.beat_type),e.R7$(8),e.R50("ngModel",n.newActionBeat.description),e.R7$(2),e.Y8G("disabled",!s.valid)}},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})(),ie=(()=>{class i{constructor(t,o){this.actionBeatService=t,this.snackBar=o,this.actionBeatUpdated=new e.bkB,this.selectedElement={number:1,description:"",text:"",beat_type:"action"},this.showEditModal=!1}ngOnChanges(){this.actionBeat&&(this.selectedElement={...this.actionBeat})}updateActionBeat(){!this.selectedElement||!this.selectedElement.id||(!this.selectedElement.productionId&&this.actionBeat.productionId&&(this.selectedElement.productionId=this.actionBeat.productionId),!this.selectedElement.sequenceId&&this.actionBeat.sequenceId&&(this.selectedElement.sequenceId=this.actionBeat.sequenceId),!this.selectedElement.sceneId&&this.actionBeat.sceneId&&(this.selectedElement.sceneId=this.actionBeat.sceneId),!this.selectedElement.text&&this.selectedElement.description&&(this.selectedElement.text=this.selectedElement.description),this.actionBeatService.updateActionBeat(this.selectedElement.productionId||this.productionId,this.selectedElement.sequenceId||this.sequenceId,this.selectedElement.sceneId||this.sceneId,this.selectedElement.id,this.selectedElement).subscribe({next:()=>{this.snackBar.open("Action Beat updated","Close",{duration:3e3}),this.actionBeatUpdated.emit(),this.showEditModal=!1},error:t=>{console.error("Error updating action beat:",t),this.snackBar.open("Failed to update action beat","Close",{duration:3e3})}}))}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(M),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-action-beat-edit"]],inputs:{actionBeat:"actionBeat",sequenceId:"sequenceId",productionId:"productionId",sceneId:"sceneId"},outputs:{actionBeatUpdated:"actionBeatUpdated"},standalone:!0,features:[e.OA$,e.aNF],decls:22,vars:3,consts:[[3,"ngSubmit"],[1,"mb-3"],["for","editNumber",1,"form-label"],["type","number","id","editNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","editBeatType",1,"form-label"],["id","editBeatType","name","beat_type","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","action"],["value","dialogue"],["for","editDescription",1,"form-label"],["id","editDescription","name","description","required","","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary"]],template:function(o,n){1&o&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return n.updateActionBeat()}),e.j41(1,"div",1)(2,"label",2),e.EFF(3,"Number"),e.k0s(),e.j41(4,"input",3),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.number,r)||(n.selectedElement.number=r),r}),e.k0s()(),e.j41(5,"div",1)(6,"label",4),e.EFF(7,"Type"),e.k0s(),e.j41(8,"select",5),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.beat_type,r)||(n.selectedElement.beat_type=r),r}),e.j41(9,"option",6),e.EFF(10,"Action"),e.k0s(),e.j41(11,"option",7),e.EFF(12,"Dialogue"),e.k0s()()(),e.j41(13,"div",1)(14,"label",8),e.EFF(15,"Description"),e.k0s(),e.j41(16,"textarea",9),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.description,r)||(n.selectedElement.description=r),r}),e.k0s()(),e.j41(17,"div",10)(18,"button",11),e.bIt("click",function(){return n.actionBeatUpdated.emit()}),e.EFF(19,"Cancel"),e.k0s(),e.j41(20,"button",12),e.EFF(21,"Save"),e.k0s()()()),2&o&&(e.R7$(4),e.R50("ngModel",n.selectedElement.number),e.R7$(4),e.R50("ngModel",n.selectedElement.beat_type),e.R7$(8),e.R50("ngModel",n.selectedElement.description))},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})(),j=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/productions`}getShots(t,o,n,s){return this.http.get(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}/shots`)}getShotsByScene(t){return this.http.get(`${m.c.apiUrl}/scenes/${t}/shots`)}getShotsByActionBeat(t){return this.http.get(`${m.c.apiUrl}/action-beats/${t}/shots`)}getShot(t){return this.http.get(`${this.apiUrl}/${t}`)}createShot(t,o,n,s,r){return this.http.post(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}/shots`,r)}updateShot(t,o,n,s,r,a){return this.http.put(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}/shots/${r}`,a)}deleteShot(t,o,n,s,r){return this.http.delete(`${this.apiUrl}/${t}/sequences/${o}/scenes/${n}/action_beats/${s}/shots/${r}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),se=(()=>{class i{constructor(t,o){this.shotService=t,this.snackBar=o,this.shotCreated=new e.bkB,this.newShot={number:"1",description:"",camera:"",framing:"",movement:"",camera_angle:"",camera_movement:"",notes:"",vfx:""}}createShot(){if(!(this.newShot.number&&this.newShot.description&&this.newShot.camera&&this.newShot.movement))return void this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});const t={...this.newShot,sceneId:this.sceneId,sequenceId:this.sequenceId,productionId:this.productionId};this.actionBeatId&&(t.actionBeatId=this.actionBeatId),this.shotService.createShot(this.productionId,this.sequenceId,this.sceneId,this.actionBeatId||0,t).subscribe({next:()=>{this.snackBar.open("Shot added","Close",{duration:3e3}),this.resetForm(),this.shotCreated.emit()},error:o=>{console.error("Failed to add shot:",o),this.snackBar.open("Failed to add shot","Close",{duration:3e3})}})}resetForm(){this.newShot={number:"1",description:"",camera:"",framing:"",movement:"",notes:"",vfx:""}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(j),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-shot-new"]],inputs:{actionBeatId:"actionBeatId",sceneId:"sceneId",sequenceId:"sequenceId",productionId:"productionId"},outputs:{shotCreated:"shotCreated"},standalone:!0,features:[e.aNF],decls:39,vars:8,consts:[["shotForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["for","shotNumber",1,"form-label"],["type","text","id","shotNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotDescription",1,"form-label"],["id","shotDescription","name","description","required","","placeholder","Shot description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","shotCamera",1,"form-label"],["type","text","id","shotCamera","name","camera","placeholder","Camera details","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotFraming",1,"form-label"],["type","text","id","shotFraming","name","framing","placeholder","Framing details",1,"form-control",3,"ngModelChange","ngModel"],["for","shotMovement",1,"form-label"],["type","text","id","shotMovement","name","movement","placeholder","Camera movement","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotVfx",1,"form-label"],["id","shotVfx","name","type",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","yes"],["value","no"],["for","shotNotes",1,"form-label"],["id","shotNotes","name","notes","placeholder","Additional notes","rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.createShot())}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Number"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.number,a)||(n.newShot.number=a),e.Njj(a)}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"Description"),e.k0s(),e.j41(9,"textarea",6),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.description,a)||(n.newShot.description=a),e.Njj(a)}),e.k0s()(),e.j41(10,"div",2)(11,"label",7),e.EFF(12,"Camera"),e.k0s(),e.j41(13,"input",8),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.camera,a)||(n.newShot.camera=a),e.Njj(a)}),e.k0s()(),e.j41(14,"div",2)(15,"label",9),e.EFF(16,"Framing"),e.k0s(),e.j41(17,"input",10),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.framing,a)||(n.newShot.framing=a),e.Njj(a)}),e.k0s()(),e.j41(18,"div",2)(19,"label",11),e.EFF(20,"Movement"),e.k0s(),e.j41(21,"input",12),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.movement,a)||(n.newShot.movement=a),e.Njj(a)}),e.k0s()(),e.j41(22,"div",2)(23,"label",13),e.EFF(24,"VFX Shot"),e.k0s(),e.j41(25,"select",14),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.vfx,a)||(n.newShot.vfx=a),e.Njj(a)}),e.j41(26,"option",15),e.EFF(27,"Select type"),e.k0s(),e.j41(28,"option",16),e.EFF(29,"Yes"),e.k0s(),e.j41(30,"option",17),e.EFF(31,"No"),e.k0s()()(),e.j41(32,"div",2)(33,"label",18),e.EFF(34,"Notes"),e.k0s(),e.j41(35,"textarea",19),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newShot.notes,a)||(n.newShot.notes=a),e.Njj(a)}),e.k0s()(),e.j41(36,"div",20)(37,"button",21),e.EFF(38," Add Shot "),e.k0s()()()}if(2&o){const s=e.sdS(1);e.R7$(5),e.R50("ngModel",n.newShot.number),e.R7$(4),e.R50("ngModel",n.newShot.description),e.R7$(4),e.R50("ngModel",n.newShot.camera),e.R7$(4),e.R50("ngModel",n.newShot.framing),e.R7$(4),e.R50("ngModel",n.newShot.movement),e.R7$(4),e.R50("ngModel",n.newShot.vfx),e.R7$(10),e.R50("ngModel",n.newShot.notes),e.R7$(2),e.Y8G("disabled",!s.valid)}},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z],styles:["form[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}textarea[_ngcontent-%COMP%]{resize:vertical}.form-label[_ngcontent-%COMP%]{font-weight:500}"]})}}return i})(),re=(()=>{class i{constructor(t,o){this.shotService=t,this.snackBar=o,this.shotUpdated=new e.bkB,this.selectedElement={number:"",description:"",camera:"",framing:"",movement:"",camera_angle:"",camera_movement:"",notes:"",vfx:""}}ngOnChanges(){this.shot&&(this.selectedElement={...this.shot})}updateShot(){!this.selectedElement||!this.selectedElement.id||(this.selectedElement.productionId=this.productionId,this.selectedElement.sequenceId=this.sequenceId,this.selectedElement.sceneId=this.sceneId,this.selectedElement.actionBeatId=this.actionBeatId,this.shotService.updateShot(this.productionId,this.sequenceId,this.sceneId,this.actionBeatId,this.selectedElement.id,this.selectedElement).subscribe({next:()=>{this.snackBar.open("Shot updated","Close",{duration:3e3}),this.shotUpdated.emit()},error:t=>{console.error("Failed to update shot:",t),this.snackBar.open("Failed to update shot","Close",{duration:3e3})}}))}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(j),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-shot-edit"]],inputs:{shot:"shot",sequenceId:"sequenceId",productionId:"productionId",sceneId:"sceneId",actionBeatId:"actionBeatId"},outputs:{shotUpdated:"shotUpdated"},standalone:!0,features:[e.OA$,e.aNF],decls:40,vars:7,consts:[[3,"ngSubmit"],[1,"mb-3"],["for","shotNumber",1,"form-label"],["type","text","id","shotNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotDescription",1,"form-label"],["id","shotDescription","name","description","required","","placeholder","Shot description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","shotCamera",1,"form-label"],["type","text","id","shotCamera","name","camera","placeholder","Camera details","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotFraming",1,"form-label"],["type","text","id","shotFraming","name","framing","placeholder","Framing details",1,"form-control",3,"ngModelChange","ngModel"],["for","shotMovement",1,"form-label"],["type","text","id","shotMovement","name","movement","placeholder","Camera movement","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","shotVfx",1,"form-label"],["id","shotVfx","name","vfx",1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","yes"],["value","no"],["for","shotNotes",1,"form-label"],["id","shotNotes","name","notes","placeholder","Additional notes","rows","2",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary"]],template:function(o,n){1&o&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return n.updateShot()}),e.j41(1,"div",1)(2,"label",2),e.EFF(3,"Number"),e.k0s(),e.j41(4,"input",3),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.number,r)||(n.selectedElement.number=r),r}),e.k0s()(),e.j41(5,"div",1)(6,"label",4),e.EFF(7,"Description"),e.k0s(),e.j41(8,"textarea",5),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.description,r)||(n.selectedElement.description=r),r}),e.k0s()(),e.j41(9,"div",1)(10,"label",6),e.EFF(11,"Camera"),e.k0s(),e.j41(12,"input",7),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.camera,r)||(n.selectedElement.camera=r),r}),e.k0s()(),e.j41(13,"div",1)(14,"label",8),e.EFF(15,"Framing"),e.k0s(),e.j41(16,"input",9),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.framing,r)||(n.selectedElement.framing=r),r}),e.k0s()(),e.j41(17,"div",1)(18,"label",10),e.EFF(19,"Movement"),e.k0s(),e.j41(20,"input",11),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.movement,r)||(n.selectedElement.movement=r),r}),e.k0s()(),e.j41(21,"div",1)(22,"label",12),e.EFF(23,"VFX Shot"),e.k0s(),e.j41(24,"select",13),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.vfx,r)||(n.selectedElement.vfx=r),r}),e.j41(25,"option",14),e.EFF(26,"Select type"),e.k0s(),e.j41(27,"option",15),e.EFF(28,"Yes"),e.k0s(),e.j41(29,"option",16),e.EFF(30,"No"),e.k0s()()(),e.j41(31,"div",1)(32,"label",17),e.EFF(33,"Notes"),e.k0s(),e.j41(34,"textarea",18),e.mxI("ngModelChange",function(r){return e.DH7(n.selectedElement.notes,r)||(n.selectedElement.notes=r),r}),e.k0s()(),e.j41(35,"div",19)(36,"button",20),e.bIt("click",function(){return n.shotUpdated.emit()}),e.EFF(37,"Cancel"),e.k0s(),e.j41(38,"button",21),e.EFF(39,"Save"),e.k0s()()()),2&o&&(e.R7$(4),e.R50("ngModel",n.selectedElement.number),e.R7$(4),e.R50("ngModel",n.selectedElement.description),e.R7$(4),e.R50("ngModel",n.selectedElement.camera),e.R7$(4),e.R50("ngModel",n.selectedElement.framing),e.R7$(4),e.R50("ngModel",n.selectedElement.movement),e.R7$(4),e.R50("ngModel",n.selectedElement.vfx),e.R7$(10),e.R50("ngModel",n.selectedElement.notes))},dependencies:[l.MD,c.YN,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z],styles:["form[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}textarea[_ngcontent-%COMP%]{resize:vertical}.form-label[_ngcontent-%COMP%]{font-weight:500}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}"]})}}return i})();function ae(i,d){if(1&i&&(e.qex(0),e.j41(1,"button",25),e.nrm(2,"img",26),e.k0s(),e.bVm()),2&i){const t=e.XpG().$implicit,o=e.XpG();e.R7$(),e.BMQ("data-bs-target","#shot-"+t.id+"-storyboard-modal"),e.R7$(),e.Y8G("src","https://ilibrium.com/"+o.getShotStoryboards(t.id)[0].path,e.B4B)}}function ce(i,d){1&i&&e.nrm(0,"i",27)}function de(i,d){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"ul",5)(2,"li",6),e.nrm(3,"input",7),e.k0s(),e.j41(4,"a",8)(5,"li")(6,"h6"),e.EFF(7),e.k0s()()(),e.j41(8,"li",9)(9,"div",10)(10,"button",11),e.nrm(11,"i",12),e.k0s(),e.j41(12,"ul",13)(13,"li")(14,"a",14),e.EFF(15,"Upload Media"),e.k0s()(),e.j41(16,"li")(17,"a",15),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.generateImagesForShot(n.id))}),e.EFF(18,"ChatGPT"),e.k0s()(),e.j41(19,"li")(20,"a",16),e.EFF(21,"Stability AI (Text Prompt)"),e.k0s()(),e.j41(22,"li")(23,"a",16),e.EFF(24,"Stability AI (Sketch)"),e.k0s()()()()(),e.j41(25,"li",17),e.DNE(26,ae,3,2,"ng-container",18)(27,ce,1,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(29,"li",19),e.EFF(30),e.k0s(),e.nrm(31,"li",20),e.j41(32,"li",20),e.nrm(33,"i",21),e.k0s(),e.nrm(34,"li",22)(35,"li",23)(36,"li",22),e.j41(37,"li",20)(38,"app-crud-dropdown",24),e.bIt("edit",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openEditModal(n))})("delete",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteShot(n.id))}),e.k0s()()()()}if(2&i){const t=d.$implicit,o=e.sdS(28),n=e.XpG();e.R7$(3),e.HbH("check-shot-sequence-"+n.sequenceId+" check-shot-scene-"+n.sceneId+" check-shot-actionB-"+n.actionBeatId),e.Y8G("id","check-shot-"+t.id)("name","check-shot-"+t.id)("value",t.id),e.BMQ("data-actionbeat-id",n.actionBeatId)("data-scene-id",n.sceneId)("data-sequence-id",n.sequenceId),e.R7$(),e.Y8G("href","#collapse-shot-"+t.id,e.B4B),e.BMQ("aria-controls","collapse-shot-"+t.id),e.R7$(3),e.LHq("",n.sequencePrefix,":",n.sceneNumber,":",n.actionBeatNumber,":",t.number,""),e.R7$(7),e.Y8G("href","/index.php/lvfx/form/150?shot_id="+t.id,e.B4B),e.R7$(6),e.BMQ("data-bs-target","#promptModalShot"+t.id),e.R7$(3),e.BMQ("data-bs-target","#canvasModalShot"+t.id),e.R7$(3),e.Y8G("ngIf",n.getShotStoryboards(t.id).length>0)("ngIfElse",o),e.R7$(4),e.SpI(" ",t.description," "),e.R7$(8),e.Y8G("entityLabel","Shot")("elementId",t.id||0)}}function le(i,d){1&i&&(e.j41(0,"p",28),e.EFF(1,"No shots available for this action beat."),e.k0s())}let ue=(()=>{class i{constructor(t,o){this.shotService=t,this.changeDetectorRef=o,this.shots=[],this.shotAssets=[],this.shotAssumptions=[],this.shotFx=[],this.showNewShotModal=!1,this.showEditModal=!1,this.selectedShot={}}ngOnInit(){this.loadShots(),document.addEventListener("openShotModal",t=>{t.detail.actionBeatId===this.actionBeatId&&(console.log("Received openShotModal event for action beat",this.actionBeatId),this.openNewShotModal())}),document.addEventListener("refreshShotList",t=>{t.detail.actionBeatId===this.actionBeatId&&(console.log("Refreshing shots list for action beat",this.actionBeatId),this.loadShots())})}ngOnDestroy(){document.removeEventListener("openShotModal",()=>{}),document.removeEventListener("refreshShotList",()=>{})}loadShots(){this.shotService.getShots(this.productionId,this.sequenceId,this.sceneId,this.actionBeatId).subscribe(t=>{this.shots=t})}openNewShotModal(){console.log("Opening shot modal for action beat",this.actionBeatId),this.showNewShotModal=!0,this.changeDetectorRef.detectChanges()}closeNewShotModal(){this.showNewShotModal=!1,this.changeDetectorRef.detectChanges()}onShotCreated(){this.loadShots(),this.closeNewShotModal()}openEditModal(t){this.selectedShot=t,this.showEditModal=!0,this.changeDetectorRef.detectChanges()}onShotUpdated(){this.loadShots(),this.showEditModal=!1}deleteShot(t){confirm("Are you sure you want to delete this shot?")&&this.shotService.deleteShot(this.productionId,this.sequenceId,this.sceneId,this.actionBeatId,t).subscribe({next:()=>{this.loadShots()},error:o=>{console.error("Error deleting shot:",o)}})}generateImagesForShot(t){console.log("Generating images for shot",t)}getElementsForShot(t,o){return t.filter(n=>n.shotId===o)}getShotStoryboards(t){return[]}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(j),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-shot-list"]],inputs:{actionBeatId:"actionBeatId",actionBeatNumber:"actionBeatNumber",sceneId:"sceneId",sceneNumber:"sceneNumber",sequenceId:"sequenceId",sequencePrefix:"sequencePrefix",productionId:"productionId"},standalone:!0,features:[e.aNF],decls:5,vars:9,consts:[["noStoryboard",""],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"close","title","isOpen"],[3,"shotUpdated","shot","sequenceId","productionId","sceneId","actionBeatId"],[1,"breakdown-rows","shot-row"],[2,"width","2%"],["type","checkbox",1,"shot-checkbox","individual-shot-checkbox",3,"id","name","value"],["data-bs-toggle","collapse","role","button","aria-expanded","false",1,"table-collapse-btn",2,"width","8%",3,"href"],[1,"inline-cell",2,"width","2%"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","storyboard-dropdown"],[1,"bi","bi-plus-square-fill"],[1,"dropdown-menu"],[1,"dropdown-item",3,"href"],["href","#",1,"dropdown-item",3,"click"],["href","#","data-bs-toggle","modal",1,"dropdown-item"],[1,"inline-cell",2,"width","8%","padding","4px"],[4,"ngIf","ngIfElse"],[1,"inline-cell",2,"width","20%"],[2,"width","5%"],[1,"bi","bi-person-fill"],[1,"shot-element-container",2,"width","15%"],[2,"width","15%"],[3,"edit","delete","entityLabel","elementId"],["type","button","data-bs-toggle","modal",1,"btn","p-0","m-0"],["alt","",2,"width","50px","height","auto",3,"src"],[1,"bi","bi-camera2","no-storyboard"],[1,"text-center"]],template:function(o,n){1&o&&(e.j41(0,"div"),e.DNE(1,de,39,22,"div",1)(2,le,2,0,"p",2),e.j41(3,"app-modal",3),e.bIt("close",function(){return n.showEditModal=!1}),e.j41(4,"app-shot-edit",4),e.bIt("shotUpdated",function(){return n.onShotUpdated()}),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("ngForOf",n.shots),e.R7$(),e.Y8G("ngIf",0===n.shots.length),e.R7$(),e.Y8G("title","Edit Shot")("isOpen",n.showEditModal),e.R7$(),e.Y8G("shot",n.selectedShot)("sequenceId",n.sequenceId)("productionId",n.productionId)("sceneId",n.sceneId)("actionBeatId",n.actionBeatId))},dependencies:[l.MD,l.Sq,l.bT,w,I,re],styles:[".shot-row[_ngcontent-%COMP%]{background-color:#1a1a1a;border-bottom:1px solid #818181}.storyboard-dropdown[_ngcontent-%COMP%]{color:#818181;padding:0}.storyboard-dropdown[_ngcontent-%COMP%]:hover{color:#fff}.no-storyboard[_ngcontent-%COMP%]{font-size:32px;margin-left:34px}"]})}}return i})();function pe(i,d){if(1&i&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.description," ")}}function me(i,d){if(1&i&&(e.j41(0,"p")(1,"em"),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.description)}}function he(i,d){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"ul",7)(2,"li",8),e.nrm(3,"input",9),e.k0s(),e.j41(4,"a",10)(5,"li")(6,"h6"),e.EFF(7),e.k0s()()(),e.j41(8,"li",11)(9,"button",12),e.nI1(10,"titlecase"),e.nrm(11,"i",13),e.k0s()(),e.nrm(12,"li",11),e.j41(13,"li",14),e.DNE(14,pe,2,1,"p",15)(15,me,3,1,"p",15),e.k0s(),e.nrm(16,"li",11)(17,"li",11)(18,"li",16)(19,"li",16)(20,"li",16),e.j41(21,"li",11)(22,"app-crud-dropdown",17),e.bIt("add",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openNewShotModal(n.id))})("edit",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openEditModal(n))})("delete",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteActionBeat(n.id))}),e.k0s()()(),e.j41(23,"div",18),e.nrm(24,"app-shot-list",19),e.k0s()()}if(2&i){const t=d.$implicit,o=e.XpG();e.R7$(),e.BMQ("data-scene-id",o.sceneId)("data-sequence-id",o.sequenceId),e.R7$(2),e.HbH("check-actionB-sequence-"+o.sequenceId+" check-actionB-scene-"+o.sceneId),e.Y8G("id","check-actionB-"+t.id)("name","check-actionB-"+t.id)("value",t.id),e.BMQ("data-actionbeat-id",t.id)("data-scene-id",o.sceneId)("data-sequence-id",o.sequenceId),e.R7$(),e.Y8G("href","#collapse-actionB-"+t.id,e.B4B),e.BMQ("aria-controls","collapse-actionB-"+t.id),e.R7$(3),e.E5c("",o.sequencePrefix,":",o.sceneNumber,":",t.number,""),e.R7$(2),e.BMQ("title",e.bMT(10,30,t.beat_type)),e.R7$(2),e.Y8G("ngClass","action"===t.beat_type?"bi-stars":"bi-chat-dots-fill"),e.R7$(3),e.Y8G("ngIf","action"===t.beat_type),e.R7$(),e.Y8G("ngIf","dialogue"===t.beat_type),e.R7$(7),e.Y8G("entityLabel","Action Beat")("elementId",t.id||0)("addLabel","Add New Shot"),e.R7$(),e.Y8G("id","collapse-actionB-"+t.id),e.R7$(),e.Y8G("actionBeatId",t.id)("actionBeatNumber",t.number)("sceneId",o.sceneId)("sceneNumber",o.sceneNumber)("sequenceId",o.sequenceId)("sequencePrefix",o.sequencePrefix)("productionId",o.productionId)}}function fe(i,d){1&i&&(e.j41(0,"p",20),e.EFF(1,"No action beats available for this scene."),e.k0s())}function ge(i,d){if(1&i&&(e.j41(0,"div",21),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Lme(" Modal is ",t.showNewActionBeatModal?"VISIBLE":"HIDDEN"," Scene ID: ",t.sceneId," ")}}let x=(()=>{class i{constructor(t,o){this.actionBeatService=t,this.changeDetectorRef=o,this.actionBeats=[],this.showNewActionBeatModal=!1,this.showEditModal=!1,this.showNewShotModal=!1,this.selectedElement={}}ngOnInit(){this.loadActionBeats(),document.addEventListener("openActionBeatModal",t=>{t.detail.sceneId===this.sceneId&&(console.log("Received openActionBeatModal event for scene",this.sceneId),this.openNewActionBeatModal())})}ngOnDestroy(){document.removeEventListener("openActionBeatModal",t=>{})}loadActionBeats(){this.actionBeatService.getActionBeats(this.sceneId,this.sequenceId,this.productionId).subscribe(t=>{this.actionBeats=t})}openNewActionBeatModal(){console.log("Opening action beat modal for scene",this.sceneId),this.showNewActionBeatModal=!0,this.changeDetectorRef.detectChanges()}closeNewActionBeatModal(){this.showNewActionBeatModal=!1,this.changeDetectorRef.detectChanges()}onActionBeatCreated(){this.loadActionBeats(),this.closeNewActionBeatModal()}openEditModal(t){this.selectedElement=t,this.showEditModal=!0,this.changeDetectorRef.detectChanges()}onActionBeatUpdated(){this.loadActionBeats(),this.showEditModal=!1}deleteActionBeat(t){confirm("Are you sure you want to delete this action beat?")&&this.actionBeatService.deleteActionBeat(this.productionId,this.sequenceId,this.sceneId,t).subscribe({next:()=>{this.loadActionBeats()},error:o=>{console.error("Error deleting action beat:",o)}})}openNewShotModal(t){this.selectedActionBeatId=t,this.showNewShotModal=!0,this.changeDetectorRef.detectChanges()}closeNewShotModal(){this.showNewShotModal=!1,this.changeDetectorRef.detectChanges()}onShotCreated(){const t=new CustomEvent("refreshShotList",{detail:{actionBeatId:this.selectedActionBeatId}});document.dispatchEvent(t),this.closeNewShotModal()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(M),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-action-beat-list"]],inputs:{sceneId:"sceneId",sceneNumber:"sceneNumber",sequenceId:"sequenceId",sequencePrefix:"sequencePrefix",productionId:"productionId"},standalone:!0,features:[e.aNF],decls:10,vars:20,consts:[[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"close","title","isOpen"],[3,"actionBeatCreated","sceneId","sequenceId","productionId"],[3,"actionBeatUpdated","actionBeat","sequenceId","productionId","sceneId"],[3,"shotCreated","actionBeatId","sceneId","sequenceId","productionId"],["class","debug-info",4,"ngIf"],[1,"breakdown-rows","actionB-row"],[2,"width","2%"],["type","checkbox",1,"individual-actionB-checkbox","shot-checkbox",3,"id","name","value"],["data-bs-toggle","collapse","role","button","aria-expanded","false",1,"table-collapse-btn",2,"width","8%",3,"href"],[2,"width","5%"],["type","button","data-bs-toggle","tooltip",1,"btn-transparent"],[1,"bi",3,"ngClass"],[1,"inline-cell",2,"width","20%"],[4,"ngIf"],[2,"width","15%"],[3,"add","edit","delete","entityLabel","elementId","addLabel"],[1,"collapse","row-collapse",3,"id"],[3,"actionBeatId","actionBeatNumber","sceneId","sceneNumber","sequenceId","sequencePrefix","productionId"],[1,"text-center"],[1,"debug-info"]],template:function(o,n){1&o&&(e.j41(0,"div"),e.DNE(1,he,25,32,"div",0)(2,fe,2,0,"p",1),e.j41(3,"app-modal",2),e.bIt("close",function(){return n.closeNewActionBeatModal()}),e.j41(4,"app-action-beat-new",3),e.bIt("actionBeatCreated",function(){return n.onActionBeatCreated()}),e.k0s()(),e.j41(5,"app-modal",2),e.bIt("close",function(){return n.showEditModal=!1}),e.j41(6,"app-action-beat-edit",4),e.bIt("actionBeatUpdated",function(){return n.onActionBeatUpdated()}),e.k0s()(),e.j41(7,"app-modal",2),e.bIt("close",function(){return n.closeNewShotModal()}),e.j41(8,"app-shot-new",5),e.bIt("shotCreated",function(){return n.onShotCreated()}),e.k0s()(),e.DNE(9,ge,2,2,"div",6),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngForOf",n.actionBeats),e.R7$(),e.Y8G("ngIf",0===n.actionBeats.length),e.R7$(),e.Y8G("title","Add New Action Beat")("isOpen",n.showNewActionBeatModal),e.R7$(),e.Y8G("sceneId",n.sceneId)("sequenceId",n.sequenceId)("productionId",n.productionId),e.R7$(),e.Y8G("title","Edit Action Beat")("isOpen",n.showEditModal),e.R7$(),e.Y8G("actionBeat",n.selectedElement)("sequenceId",n.sequenceId)("productionId",n.productionId)("sceneId",n.sceneId),e.R7$(),e.Y8G("title","Add New Shot")("isOpen",n.showNewShotModal),e.R7$(),e.Y8G("actionBeatId",n.selectedActionBeatId)("sceneId",n.sceneId)("sequenceId",n.sequenceId)("productionId",n.productionId),e.R7$(),e.Y8G("ngIf",!1))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.PV,w,I,oe,ie,se,ue],styles:[".actionB-row[_ngcontent-%COMP%]{background-color:#2e3b45}"]})}}return i})();function _e(i,d){1&i&&(e.j41(0,"div",7),e.nrm(1,"mat-spinner",8),e.j41(2,"p",9),e.EFF(3,"Loading scenes..."),e.k0s()())}function be(i,d){if(1&i&&(e.j41(0,"div",10),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.error)}}function Se(i,d){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"ul",11)(2,"li",12),e.nrm(3,"input",13),e.k0s(),e.j41(4,"a",14)(5,"li")(6,"h6"),e.EFF(7),e.k0s()()(),e.j41(8,"li",15)(9,"button",16),e.nrm(10,"i",17),e.k0s()(),e.j41(11,"li",15),e.EFF(12),e.k0s(),e.j41(13,"li",18),e.EFF(14),e.k0s(),e.j41(15,"li",19),e.nrm(16,"i",20),e.EFF(17),e.k0s(),e.j41(18,"li",15)(19,"div",21),e.EFF(20),e.k0s(),e.nrm(21,"div",22)(22,"div",23),e.k0s(),e.nrm(23,"li",15)(24,"li",24),e.j41(25,"li",15)(26,"app-crud-dropdown",25),e.bIt("add",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openNewActionBeatModal(n.id))})("edit",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.openEditModal(n))})("delete",function(){const n=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.deleteScene(n.id))}),e.k0s()()(),e.j41(27,"div",26),e.nrm(28,"app-action-beat-list",27),e.k0s()()}if(2&i){const t=d.$implicit,o=e.XpG();e.R7$(3),e.Y8G("id","check-scene-"+t.id)("name","check-scene-"+t.id)("value",t.id),e.BMQ("data-scene-id",t.id)("data-sequence-id",t.sequenceId),e.R7$(),e.Y8G("href","#collapse-scene-"+t.id,e.B4B),e.BMQ("aria-controls","collapse-scene-"+t.id),e.R7$(3),e.Lme("",o.sequencePrefix,":",t.number,""),e.R7$(5),e.SpI(" ","interior"===t.int_ext?"Int - ":"Ext - "," "),e.R7$(),e.Y8G("id","scene-location-"+t.id),e.BMQ("data-scene-id",t.id),e.R7$(),e.SpI(" ",t.location," "),e.R7$(3),e.SpI(" ",t.day_night," "),e.R7$(3),e.SpI(" ",t.length," "),e.R7$(6),e.Y8G("entityLabel","Scene")("elementId",t.id||0)("addLabel","Add New Action Beat"),e.R7$(),e.Y8G("id","collapse-scene-"+t.id),e.R7$(),e.Y8G("sceneId",t.id)("sceneNumber",t.number)("sequenceId",o.sequenceId)("sequencePrefix",o.sequencePrefix)("productionId",o.productionId)}}function Ce(i,d){1&i&&(e.j41(0,"p",28),e.EFF(1,"No scenes available for this sequence."),e.k0s())}let U=(()=>{class i{constructor(t,o){this.sceneService=t,this.snackBar=o,this.scenes=[],this.loading=!0,this.error="",this.showEditModal=!1,this.showNewSceneModal=!1,this.isEditing=!1,this.selectedElement={number:0,location:"",int_ext:"",day_night:"",description:"",length:""}}ngOnInit(){this.sequenceId?this.loadScenes():(this.error="No sequence ID provided",this.loading=!1)}openEditModal(t){this.selectedElement={...t},this.isEditing=!0,this.showEditModal=!0}openNewSceneModal(){this.showNewSceneModal=!0}closeNewSceneModal(){this.showNewSceneModal=!1}onSceneCreated(){this.loadScenes(),this.closeNewSceneModal()}onSceneUpdated(){this.loadScenes(),this.showEditModal=!1}openNewActionBeatModal(t){const o=document.getElementById(`collapse-scene-${t}`);if(o&&o.classList.add("show"),this.scenes.find(s=>s.id===t)){localStorage.setItem("selectedSceneId",t.toString());const s=new CustomEvent("openActionBeatModal",{detail:{sceneId:t}});document.dispatchEvent(s),setTimeout(()=>{const r=document.querySelector(`app-action-beat-list[ng-reflect-scene-id="${t}"]`);if(r){const a=r.querySelector(".btn-primary");a&&a.click()}},150)}}loadScenes(){this.sceneService.getScenesBySequence(this.productionId,this.sequenceId).subscribe({next:t=>{this.scenes=t.sort((o,n)=>o.number-n.number),this.loading=!1},error:t=>{this.error="Failed to load scenes",this.loading=!1}})}deleteScene(t){confirm("Are you sure you want to delete this scene?")&&this.sceneService.deleteScene(this.productionId,this.sequenceId,t).subscribe({next:()=>{this.snackBar.open("Scene deleted successfully","Close",{duration:3e3}),this.loadScenes()},error:()=>{this.snackBar.open("Failed to delete scene","Close",{duration:3e3})}})}refreshScenes(){this.loadScenes()}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(B),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-scene-list"]],viewQuery:function(o,n){if(1&o&&e.GBs(x,5),2&o){let s;e.mGM(s=e.lsd())&&(n.actionBeatListComponents=s)}},inputs:{sequenceId:"sequenceId",sequencePrefix:"sequencePrefix",productionId:"productionId"},standalone:!0,features:[e.aNF],decls:9,vars:13,consts:[["class","text-center my-3",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[3,"close","title","isOpen"],[3,"sceneUpdated","scene","sequenceId","productionId"],[3,"sceneCreated","sequenceId","productionId"],[1,"text-center","my-3"],["diameter","40",1,"mx-auto"],[1,"mt-2"],[1,"alert","alert-danger"],[1,"breakdown-rows","scene-row"],[2,"width","2%"],["type","checkbox",1,"shot-checkbox","individual-scene-checkbox",3,"id","name","value"],["data-bs-toggle","collapse","role","button","aria-expanded","false",1,"table-collapse-btn",2,"width","8%",3,"href"],[2,"width","5%"],["type","button","title","Scene","data-bs-toggle","tooltip",1,"btn-transparent"],[1,"bi","bi-film"],[1,"inline-cell","scene-location",2,"width","20%",3,"id"],[2,"width","15%"],[1,"bi","bi-brightness-alt-high-fill"],[1,"scene-length"],[1,"scene-length-corner"],[1,"scene-length-fold"],[2,"width","30%"],[3,"add","edit","delete","entityLabel","elementId","addLabel"],[1,"collapse","row-collapse",3,"id"],[3,"sceneId","sceneNumber","sequenceId","sequencePrefix","productionId"],[1,"text-center"]],template:function(o,n){1&o&&(e.j41(0,"div"),e.DNE(1,_e,4,0,"div",0)(2,be,2,1,"div",1)(3,Se,29,24,"div",2)(4,Ce,2,0,"p",3),e.j41(5,"app-modal",4),e.bIt("close",function(){return n.showEditModal=!1}),e.j41(6,"app-scene-edit",5),e.bIt("sceneUpdated",function(){return n.onSceneUpdated()}),e.k0s()(),e.j41(7,"app-modal",4),e.bIt("close",function(){return n.closeNewSceneModal()}),e.j41(8,"app-scene-new",6),e.bIt("sceneCreated",function(){return n.onSceneCreated()}),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error),e.R7$(),e.Y8G("ngForOf",n.scenes),e.R7$(),e.Y8G("ngIf",0===n.scenes.length&&!n.loading),e.R7$(),e.Y8G("title","Edit Scene")("isOpen",n.showEditModal),e.R7$(),e.Y8G("scene",n.selectedElement)("sequenceId",n.sequenceId)("productionId",n.productionId),e.R7$(),e.Y8G("title","Add New Scene")("isOpen",n.showNewSceneModal),e.R7$(),e.Y8G("sequenceId",n.sequenceId)("productionId",n.productionId))},dependencies:[l.MD,l.Sq,l.bT,b.m_,_.D6,_.LG,c.YN,p.Hl,I,P,w,ne,x],styles:[".scene-row[_ngcontent-%COMP%]{background-color:#3e5060}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;width:500px;max-width:90%;box-shadow:0 3px 7px #0000004d}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px}.mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.scene-length[_ngcontent-%COMP%]{margin-top:8px;border:1px solid white;width:26px;height:40px;border-radius:3px;position:relative;overflow:hidden;clip-path:polygon(0 0%,10% 0,100% 0,100% 80%,70% 100%,0% 100%)}.scene-length-corner[_ngcontent-%COMP%]{width:8px;height:8px;border-top:1px solid white;border-left:1px solid white;position:relative;left:18px;bottom:8px}.scene-length-fold[_ngcontent-%COMP%]{position:relative;left:16px;bottom:12px;width:11px;height:1px;background-color:#fff;transform:rotate(-45deg)}"]})}}return i})(),k=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${m.c.apiUrl}/v1/productions`}getSequences(t){return this.http.get(`${this.apiUrl}/${t}/sequences`)}getSequence(t,o){return this.http.get(`${this.apiUrl}/${t}/sequences/${o}`)}createSequence(t,o){return this.http.post(`${this.apiUrl}/${t}/sequences`,o)}updateSequence(t,o,n){return this.http.put(`${this.apiUrl}/${t}/sequences/${o}`,n)}deleteSequence(t,o){return this.http.delete(`${this.apiUrl}/${t}/sequences/${o}`)}static{this.\u0275fac=function(o){return new(o||i)(e.KVO(S.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ie=(()=>{class i{constructor(t,o){this.sequenceService=t,this.snackBar=o,this.sequenceUpdated=new e.bkB,this.selectedElement={number:0,name:"",prefix:"",description:""},this.showEditModal=!1}ngOnChanges(){this.sequence&&(this.selectedElement={...this.sequence})}updateSequence(){!this.selectedElement||!this.selectedElement.id||(!this.selectedElement.productionId&&this.sequence.productionId&&(this.selectedElement.productionId=this.sequence.productionId),this.sequenceService.updateSequence(this.productionId,this.selectedElement.id,this.selectedElement).subscribe({next:()=>{this.snackBar.open("Sequence updated","Close",{duration:3e3}),this.sequenceUpdated.emit(),this.showEditModal=!1},error:t=>{console.error("Error updating sequence:",t),this.snackBar.open("Failed to update sequence","Close",{duration:3e3})}}))}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(k),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-sequence-edit"]],inputs:{sequence:"sequence",productionId:"productionId"},outputs:{sequenceUpdated:"sequenceUpdated"},standalone:!0,features:[e.OA$,e.aNF],decls:21,vars:5,consts:[["sequenceForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["for","sequenceNumber",1,"form-label"],["type","number","id","sequenceNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sequencePrefix",1,"form-label"],["type","text","id","sequencePrefix","name","prefix","placeholder","e.g., SEQ01","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sequenceName",1,"form-label"],["type","text","id","sequenceName","name","name","required","","placeholder","Sequence name",1,"form-control",3,"ngModelChange","ngModel"],["for","sequenceDescription",1,"form-label"],["id","sequenceDescription","name","description","placeholder","Sequence description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.updateSequence())}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Number"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.selectedElement.number,a)||(n.selectedElement.number=a),e.Njj(a)}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"Prefix"),e.k0s(),e.j41(9,"input",6),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.selectedElement.prefix,a)||(n.selectedElement.prefix=a),e.Njj(a)}),e.k0s()(),e.j41(10,"div",2)(11,"label",7),e.EFF(12,"Name"),e.k0s(),e.j41(13,"input",8),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.selectedElement.name,a)||(n.selectedElement.name=a),e.Njj(a)}),e.k0s()(),e.j41(14,"div",2)(15,"label",9),e.EFF(16,"Description"),e.k0s(),e.j41(17,"textarea",10),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.selectedElement.description,a)||(n.selectedElement.description=a),e.Njj(a)}),e.k0s()(),e.j41(18,"div",11)(19,"button",12),e.EFF(20," Update Sequence "),e.k0s()()()}if(2&o){const s=e.sdS(1);e.R7$(5),e.R50("ngModel",n.selectedElement.number),e.R7$(4),e.R50("ngModel",n.selectedElement.prefix),e.R7$(4),e.R50("ngModel",n.selectedElement.name),e.R7$(4),e.R50("ngModel",n.selectedElement.description),e.R7$(2),e.Y8G("disabled",!s.valid)}},dependencies:[l.MD,c.YN,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})();function we(i,d){1&i&&(e.j41(0,"div",7),e.nrm(1,"mat-spinner"),e.k0s())}function ke(i,d){if(1&i&&(e.j41(0,"div",8),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.error)}}function Fe(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",10)(1,"ul",11)(2,"li",12),e.nrm(3,"input",13),e.k0s(),e.j41(4,"a",14)(5,"li",15)(6,"h6"),e.EFF(7),e.k0s()()(),e.nrm(8,"li",12)(9,"li",16),e.j41(10,"li",17),e.EFF(11),e.k0s(),e.nrm(12,"li",18)(13,"li",18)(14,"li",19)(15,"li",19)(16,"li",19),e.j41(17,"li",18)(18,"app-crud-dropdown",20),e.bIt("add",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.openNewSceneModal(n.id))})("edit",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.openEditModal(n))})("delete",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.deleteSequence(n.id))}),e.k0s()()(),e.j41(19,"div",21),e.nrm(20,"app-scene-list",22),e.k0s()()}if(2&i){const t=d.$implicit,o=e.XpG(2);e.Y8G("id","sequence-"+t.id),e.R7$(3),e.Y8G("id","check-sequence-"+t.id)("name","check-sequence-"+t.id)("value",t.id),e.R7$(),e.Y8G("href","#collapse-seq-"+t.id,e.B4B),e.BMQ("aria-controls","collapse-seq-"+t.id),e.R7$(3),e.JRh(t.prefix),e.R7$(4),e.JRh(t.name),e.R7$(7),e.Y8G("entityLabel","Sequence")("elementId",t.id||0)("addLabel","Add New Scene"),e.R7$(),e.Y8G("id","collapse-seq-"+t.id),e.R7$(),e.Y8G("sequenceId",t.id)("sequencePrefix",t.prefix)("productionId",o.productionId)}}function Ee(i,d){if(1&i&&(e.j41(0,"div"),e.DNE(1,Fe,21,15,"div",9),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.sequences)}}function ve(i,d){1&i&&(e.j41(0,"p",23),e.EFF(1,"No sequences available."),e.k0s())}let q=(()=>{class i{constructor(t,o){this.sequenceService=t,this.snackBar=o,this.sequences=[],this.loading=!0,this.error="",this.showModal=!1,this.showEditModal=!1,this.showNewSceneModal=!1,this.isEditing=!1,this.selectedElement=null,this.selectedSequence={},this.sequenceId=0,this.newSequence={productionId:this.productionId,number:1,name:"",prefix:""}}ngOnInit(){this.loadSequences()}ngAfterViewInit(){this.sceneListComponents.changes.subscribe(()=>{console.log("Scene list components updated")})}openEditModal(t){this.selectedSequence={...t},this.showEditModal=!0}closeEditModal(){this.showEditModal=!1}onSequenceUpdated(){this.closeEditModal(),this.loadSequences()}openNewSceneModal(t){this.sequenceId=t,this.showNewSceneModal=!0}closeNewSceneModal(){this.showNewSceneModal=!1}onSceneCreated(){this.closeNewSceneModal(),setTimeout(()=>{this.expandSequenceCollapse(this.sequenceId);const t=this.sceneListComponents.find(o=>o.sequenceId===this.sequenceId);t&&t.refreshScenes()})}expandSequenceCollapse(t){const o=document.querySelector(`#collapse-seq-${t}`);o&&!o.classList.contains("show")&&o.classList.add("show")}loadSequences(){this.sequenceService.getSequences(this.productionId).subscribe({next:t=>{this.sequences=t,this.loading=!1},error:t=>{this.error="Failed to load sequences",this.loading=!1}})}createSequence(){!this.newSequence.name||!this.newSequence.number||this.sequenceService.createSequence(this.productionId,this.newSequence).subscribe({next:t=>{this.snackBar.open("Sequence added","Close",{duration:3e3}),this.loadSequences(),this.newSequence={productionId:this.productionId,number:1,name:"",prefix:""}},error:()=>{this.snackBar.open("Failed to add sequence","Close",{duration:3e3})}})}deleteSequence(t){confirm("Are you sure you want to delete this sequence?")&&this.sequenceService.deleteSequence(this.productionId,t).subscribe({next:()=>{this.snackBar.open("Sequence deleted successfully","Close",{duration:3e3}),this.loadSequences()},error:()=>{this.snackBar.open("Failed to delete sequence","Close",{duration:3e3})}})}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(k),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-sequence-list"]],viewQuery:function(o,n){if(1&o&&e.GBs(U,5),2&o){let s;e.mGM(s=e.lsd())&&(n.sceneListComponents=s)}},inputs:{productionId:"productionId"},standalone:!0,features:[e.aNF],decls:8,vars:12,consts:[["class","text-center my-3",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],[3,"close","title","isOpen"],[3,"sceneCreated","sequenceId","productionId"],[3,"sequenceUpdated","sequence","productionId"],["class","text-center",4,"ngIf"],[1,"text-center","my-3"],[1,"alert","alert-danger"],["class","sequence sequence-container filteringList",3,"id",4,"ngFor","ngForOf"],[1,"sequence","sequence-container","filteringList",3,"id"],[1,"breakdown-rows","sequence-row"],[2,"width","2%"],["type","checkbox",1,"shot-checkbox","individual-seq-checkbox",3,"id","name","value"],["data-bs-toggle","collapse","role","button","aria-expanded","false",1,"table-collapse-btn",2,"width","8%",3,"href"],[2,"width","100%"],[2,"width","8%"],[2,"width","20%"],[2,"width","5%"],[2,"width","15%"],[3,"add","edit","delete","entityLabel","elementId","addLabel"],[1,"collapse","row-collapse",3,"id"],[3,"sequenceId","sequencePrefix","productionId"],[1,"text-center"]],template:function(o,n){1&o&&(e.DNE(0,we,2,0,"div",0)(1,ke,2,1,"div",1)(2,Ee,2,1,"div",2),e.j41(3,"app-modal",3),e.bIt("close",function(){return n.closeNewSceneModal()}),e.j41(4,"app-scene-new",4),e.bIt("sceneCreated",function(){return n.onSceneCreated()}),e.k0s()(),e.j41(5,"app-modal",3),e.bIt("close",function(){return n.closeEditModal()}),e.j41(6,"app-sequence-edit",5),e.bIt("sequenceUpdated",function(){return n.onSequenceUpdated()}),e.k0s()(),e.DNE(7,ve,2,0,"p",6)),2&o&&(e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error),e.R7$(),e.Y8G("ngIf",n.sequences.length>0),e.R7$(),e.Y8G("title","Add New Scene")("isOpen",n.showNewSceneModal),e.R7$(),e.Y8G("sequenceId",n.sequenceId)("productionId",n.productionId),e.R7$(),e.Y8G("title","Edit Sequence")("isOpen",n.showEditModal),e.R7$(),e.Y8G("sequence",n.selectedSequence)("productionId",n.productionId),e.R7$(),e.Y8G("ngIf",0===n.sequences.length&&!n.loading))},dependencies:[l.MD,l.Sq,l.bT,b.m_,_.D6,_.LG,c.YN,U,I,P,Ie,w],styles:[".sequence-row[_ngcontent-%COMP%]{background-color:#5e6a76}.sequence-container[_ngcontent-%COMP%]{margin:8px 0}.sequence-row[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}"]})}}return i})(),Be=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-production-overview"]],standalone:!0,features:[e.aNF],decls:2,vars:0,template:function(o,n){1&o&&(e.j41(0,"p"),e.EFF(1,"production-overview works!"),e.k0s())}})}}return i})(),Me=(()=>{class i{constructor(t,o){this.sequenceService=t,this.snackBar=o,this.sequenceCreated=new e.bkB,this.newSequence={number:1,name:"",prefix:"",description:""}}createSequence(){if(!this.newSequence.name||!this.newSequence.number)return;const t={...this.newSequence,productionId:this.productionId};this.sequenceService.createSequence(this.productionId,t).subscribe({next:()=>{this.snackBar.open("Sequence added","Close",{duration:3e3}),this.resetForm(),this.sequenceCreated.emit()},error:()=>{this.snackBar.open("Failed to add sequence","Close",{duration:3e3})}})}resetForm(){this.newSequence={number:1,name:"",prefix:"",description:""}}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(k),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-sequence-new"]],inputs:{productionId:"productionId"},outputs:{sequenceCreated:"sequenceCreated"},standalone:!0,features:[e.aNF],decls:21,vars:5,consts:[["sequenceForm","ngForm"],[3,"ngSubmit"],[1,"mb-3"],["for","sequenceNumber",1,"form-label"],["type","number","id","sequenceNumber","name","number","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sequencePrefix",1,"form-label"],["type","text","id","sequencePrefix","name","prefix","placeholder","e.g., SEQ01","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","sequenceName",1,"form-label"],["type","text","id","sequenceName","name","name","required","","placeholder","Sequence name",1,"form-control",3,"ngModelChange","ngModel"],["for","sequenceDescription",1,"form-label"],["id","sequenceDescription","name","description","placeholder","Sequence description","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(n.createSequence())}),e.j41(2,"div",2)(3,"label",3),e.EFF(4,"Number"),e.k0s(),e.j41(5,"input",4),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newSequence.number,a)||(n.newSequence.number=a),e.Njj(a)}),e.k0s()(),e.j41(6,"div",2)(7,"label",5),e.EFF(8,"Prefix"),e.k0s(),e.j41(9,"input",6),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newSequence.prefix,a)||(n.newSequence.prefix=a),e.Njj(a)}),e.k0s()(),e.j41(10,"div",2)(11,"label",7),e.EFF(12,"Name"),e.k0s(),e.j41(13,"input",8),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newSequence.name,a)||(n.newSequence.name=a),e.Njj(a)}),e.k0s()(),e.j41(14,"div",2)(15,"label",9),e.EFF(16,"Description"),e.k0s(),e.j41(17,"textarea",10),e.mxI("ngModelChange",function(a){return e.eBV(s),e.DH7(n.newSequence.description,a)||(n.newSequence.description=a),e.Njj(a)}),e.k0s()(),e.j41(18,"div",11)(19,"button",12),e.EFF(20," Add Sequence "),e.k0s()()()}if(2&o){const s=e.sdS(1);e.R7$(5),e.R50("ngModel",n.newSequence.number),e.R7$(4),e.R50("ngModel",n.newSequence.prefix),e.R7$(4),e.R50("ngModel",n.newSequence.name),e.R7$(4),e.R50("ngModel",n.newSequence.description),e.R7$(2),e.Y8G("disabled",!s.valid)}},dependencies:[l.MD,c.YN,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,p.Hl,p.$z]})}}return i})(),je=(()=>{class i{constructor(t,o,n){this.sequenceService=t,this.cdr=o,this.route=n,this.isModalOpen=!1,this.sequences=[],this.loading=!1,this.error="",this.isAllExpanded=!1}ngOnInit(){this.route.parent?.paramMap.subscribe(t=>{const o=t.get("id");o?(this.productionId=+o,this.loadSequences()):this.error="No production ID provided"})}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}onSequenceCreated(){this.closeModal(),this.loadSequences(),this.sequenceList.loadSequences()}loadSequences(){this.sequenceService.getSequences(this.productionId).subscribe({next:t=>{this.sequences=t.sort((o,n)=>o.number-n.number),this.loading=!1,this.cdr.detectChanges()},error:t=>{this.error="Failed to load sequences",this.loading=!1}})}toggleAll(){this.isAllExpanded=!this.isAllExpanded,document.querySelectorAll('[id^="collapse-seq-"]').forEach(a=>{this.isAllExpanded?a.classList.add("show"):a.classList.remove("show")}),document.querySelectorAll('[id^="collapse-scene-"]').forEach(a=>{this.isAllExpanded?a.classList.add("show"):a.classList.remove("show")}),document.querySelectorAll('[id^="collapse-actionB-"]').forEach(a=>{this.isAllExpanded?a.classList.add("show"):a.classList.remove("show")}),document.querySelectorAll('[id^="collapse-shot-"]').forEach(a=>{this.isAllExpanded?a.classList.add("show"):a.classList.remove("show")});const r=document.querySelector(".sticky-buttons button:first-child");r&&(r.textContent=this.isAllExpanded?"Close All":"Open All")}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(k),e.rXU(e.gRc),e.rXU(f.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-production-breakdown"]],viewQuery:function(o,n){if(1&o&&e.GBs(q,5),2&o){let s;e.mGM(s=e.lsd())&&(n.sequenceList=s.first)}},standalone:!0,features:[e.aNF],decls:46,vars:4,consts:[[1,"sticky-buttons"],[1,"btn","btn-primary",3,"click"],["id","generateShotsBtn",1,"btn","btn-primary"],["id","generateAssumptionsBtn",1,"btn","btn-primary"],["id","generateCostEstimatesBtn",1,"btn","btn-primary"],["id","shot-filtering-breakdown","placeholder","Search\u2026",1,"form-control","search-bar"],[3,"close","title","isOpen"],[3,"sequenceCreated","productionId"],[1,"breakdown-rows","sticky-headers"],[2,"width","2%"],["type","checkbox","id","check-all-shots"],[1,"seq-border",2,"width","2%"],[1,"rotate90"],[1,"scene-border",2,"width","2%"],[1,"actionB-border",2,"width","2%"],[1,"shot-border",2,"width","2%"],[2,"width","8%"],[2,"width","20%"],[2,"width","5%"],[1,"bi","bi-file-earmark-break-fill"],[1,"bi","bi-person-fill"],[2,"width","15%"],[3,"productionId"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return n.toggleAll()}),e.EFF(2,"Open All"),e.k0s(),e.j41(3,"button",1),e.bIt("click",function(){return n.openModal()}),e.EFF(4,"New Sequence"),e.k0s(),e.j41(5,"button",2),e.EFF(6,"Generate Shots"),e.k0s(),e.j41(7,"button",3),e.EFF(8,"Generate VFX Assumptions"),e.k0s(),e.j41(9,"button",4),e.EFF(10,"Generate Cost Estimates"),e.k0s(),e.nrm(11,"input",5),e.k0s(),e.j41(12,"app-modal",6),e.bIt("close",function(){return n.closeModal()}),e.j41(13,"app-sequence-new",7),e.bIt("sequenceCreated",function(){return n.onSequenceCreated()}),e.k0s()(),e.j41(14,"ul",8)(15,"li",9),e.nrm(16,"input",10),e.k0s(),e.j41(17,"li",11)(18,"p",12),e.EFF(19,"Seq."),e.k0s()(),e.j41(20,"li",13)(21,"p",12),e.EFF(22,"Scene"),e.k0s()(),e.j41(23,"li",14)(24,"p",12),e.EFF(25,"Action"),e.k0s()(),e.j41(26,"li",15)(27,"p",12),e.EFF(28,"Shot"),e.k0s()(),e.nrm(29,"li",9)(30,"li",16),e.j41(31,"li",17),e.EFF(32,"Title"),e.k0s(),e.j41(33,"li",18),e.nrm(34,"i",19),e.k0s(),e.j41(35,"li",18),e.nrm(36,"i",20),e.k0s(),e.j41(37,"li",21),e.EFF(38,"Assets"),e.k0s(),e.j41(39,"li",21),e.EFF(40,"Assumptions"),e.k0s(),e.j41(41,"li",21),e.EFF(42,"FX"),e.k0s(),e.j41(43,"li",18),e.EFF(44,"Options"),e.k0s()(),e.nrm(45,"app-sequence-list",22)),2&o&&(e.R7$(12),e.Y8G("title","Add New Sequence")("isOpen",n.isModalOpen),e.R7$(),e.Y8G("productionId",n.productionId),e.R7$(32),e.Y8G("productionId",n.productionId))},dependencies:[q,I,Me,l.MD],styles:[".sticky-headers[_ngcontent-%COMP%]{position:sticky;top:68px;overflow:hidden;background-color:#0b0c0e;height:56px;z-index:100}.rotate90[_ngcontent-%COMP%]{transform:rotate(-90deg);position:relative;top:12px}.seq-border[_ngcontent-%COMP%]{height:100%;padding-top:10px;background-color:#5e6a76}.scene-border[_ngcontent-%COMP%]{height:100%;padding-top:10px;background-color:#3e5060}.actionB-border[_ngcontent-%COMP%]{height:100%;padding-top:10px;background-color:#2e3b45}.shot-border[_ngcontent-%COMP%]{height:100%;padding-top:10px;background-color:#1a1a1a}.sticky-buttons[_ngcontent-%COMP%]{position:sticky;top:0;overflow:hidden;background-color:#0b0c0e;z-index:10;display:flex;padding:12px 0;z-index:100}.search-bar[_ngcontent-%COMP%]{width:400px!important;max-width:none!important;background-color:transparent;color:#fff}"]})}}return i})(),qe=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-production-budget"]],standalone:!0,features:[e.aNF],decls:2,vars:0,template:function(o,n){1&o&&(e.j41(0,"p"),e.EFF(1,"production-budget works!"),e.k0s())}})}}return i})();var g=u(9159),G=u(6695),y=u(2042),C=u(6467),L=u(9631);const ye=()=>[5,10,25,100],Ne=(i,d,t,o,n)=>({"bg-success":i,"bg-warning":d,"bg-danger":t,"bg-info":o,"bg-secondary":n});function Re(i,d){1&i&&(e.j41(0,"div",9),e.nrm(1,"mat-spinner",10),e.j41(2,"p",11),e.EFF(3,"Loading productions..."),e.k0s()())}function $e(i,d){if(1&i&&(e.j41(0,"div",12),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.error," ")}}function Te(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",9)(1,"mat-icon",13),e.EFF(2,"movie"),e.k0s(),e.j41(3,"h2",11),e.EFF(4,"No Productions Found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Get started by creating your first production."),e.k0s(),e.j41(7,"button",2),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createNewProduction())}),e.EFF(8," Create Production "),e.k0s()()}}function De(i,d){1&i&&(e.j41(0,"th",27),e.EFF(1," Title "),e.k0s())}function Pe(i,d){if(1&i&&(e.j41(0,"td",28),e.EFF(1),e.k0s()),2&i){const t=d.$implicit;e.R7$(),e.SpI(" ",t.title," ")}}function xe(i,d){1&i&&(e.j41(0,"th",27),e.EFF(1," Status "),e.k0s())}function Ue(i,d){if(1&i&&(e.j41(0,"td",28)(1,"span",29),e.EFF(2),e.k0s()()),2&i){const t=d.$implicit;e.R7$(),e.Y8G("ngClass",e.s1E(2,Ne,"active"===t.status,"pre-production"===t.status,"cancelled"===t.status,"completed"===t.status,!t.status)),e.R7$(),e.SpI(" ",t.status||"N/A"," ")}}function Ge(i,d){1&i&&(e.j41(0,"th",27),e.EFF(1," Start Date "),e.k0s())}function Le(i,d){if(1&i&&(e.j41(0,"td",28),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=d.$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t.startDate)," ")}}function Ae(i,d){1&i&&(e.j41(0,"th",27),e.EFF(1," End Date "),e.k0s())}function Oe(i,d){if(1&i&&(e.j41(0,"td",28),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=d.$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t.endDate)," ")}}function Ve(i,d){1&i&&(e.j41(0,"th",30),e.EFF(1," Actions "),e.k0s())}function Ye(i,d){if(1&i){const t=e.RV6();e.j41(0,"td",28)(1,"button",31),e.bIt("click",function(n){const s=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.navigateToProductionEdit(s.id,n))}),e.j41(2,"mat-icon"),e.EFF(3,"edit"),e.k0s()(),e.j41(4,"button",32),e.bIt("click",function(n){const s=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.openDeleteDialog(s.id,s.title,n))}),e.j41(5,"mat-icon"),e.EFF(6,"delete"),e.k0s()()()}}function Xe(i,d){1&i&&e.nrm(0,"tr",33)}function He(i,d){if(1&i){const t=e.RV6();e.j41(0,"tr",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.navigateToProductionDetails(n.id))}),e.k0s()}}function Qe(i,d){if(1&i&&(e.j41(0,"div",14)(1,"table",15),e.qex(2,16),e.DNE(3,De,2,0,"th",17)(4,Pe,2,1,"td",18),e.bVm(),e.qex(5,19),e.DNE(6,xe,2,0,"th",17)(7,Ue,3,8,"td",18),e.bVm(),e.qex(8,20),e.DNE(9,Ge,2,0,"th",17)(10,Le,3,3,"td",18),e.bVm(),e.qex(11,21),e.DNE(12,Ae,2,0,"th",17)(13,Oe,3,3,"td",18),e.bVm(),e.qex(14,22),e.DNE(15,Ve,2,0,"th",23)(16,Ye,7,0,"td",18),e.bVm(),e.DNE(17,Xe,1,0,"tr",24)(18,He,1,0,"tr",25),e.k0s(),e.nrm(19,"mat-paginator",26),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("dataSource",t.dataSource),e.R7$(16),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(4,ye))}}let ze=(()=>{class i{constructor(t,o,n,s){this.productionService=t,this.dialog=o,this.snackBar=n,this.router=s,this.productions=[],this.dataSource=new g.I6([]),this.displayedColumns=["title","status","startDate","endDate","actions"],this.loading=!0,this.error=""}ngOnInit(){this.loadProductions()}loadProductions(){this.loading=!0,this.productionService.getProductions().subscribe({next:t=>{this.productions=t,this.dataSource.data=t,this.loading=!1,setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})},error:t=>{this.error=t.message||"An error occurred while loading productions",this.loading=!1}})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}navigateToProductionDetails(t){this.router.navigate(["/productions",t])}navigateToProductionEdit(t,o){o.stopPropagation(),this.router.navigate(["/productions",t,"edit"])}openDeleteDialog(t,o,n){n.stopPropagation(),this.dialog.open($.w,{width:"400px",data:{title:"Delete Production",message:`Are you sure you want to delete "${o}"? This action cannot be undone.`}}).afterClosed().subscribe(r=>{r&&this.deleteProduction(t)})}deleteProduction(t){this.productionService.deleteProduction(t).subscribe({next:()=>{this.snackBar.open("Production deleted successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.loadProductions()},error:o=>{this.snackBar.open(o.message||"Failed to delete production","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}createNewProduction(){this.router.navigate(["/productions/new"])}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(v),e.rXU(T.bZ),e.rXU(h.UG),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-productions-list"]],viewQuery:function(o,n){if(1&o&&(e.GBs(G.iy,5),e.GBs(y.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n.paginator=s.first),e.mGM(s=e.lsd())&&(n.sort=s.first)}},decls:18,vars:4,consts:[[1,"container","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["mat-raised-button","","color","primary",3,"click"],["appearance","outline",1,"w-100","mb-4"],["matInput","","placeholder","Search by title or status",3,"keyup"],["matSuffix",""],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","mat-elevation-z8",4,"ngIf"],[1,"text-center","my-5"],["diameter","50",1,"mx-auto"],[1,"mt-3"],[1,"alert","alert-danger"],["color","primary",2,"font-size","48px","height","48px","width","48px"],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","style","cursor: pointer;",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"badge",3,"ngClass"],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row","",2,"cursor","pointer",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"Productions"),e.k0s(),e.j41(4,"button",2),e.bIt("click",function(){return n.createNewProduction()}),e.j41(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.EFF(7," New Production "),e.k0s()(),e.j41(8,"mat-form-field",3)(9,"mat-label"),e.EFF(10,"Filter"),e.k0s(),e.j41(11,"input",4),e.bIt("keyup",function(r){return n.applyFilter(r)}),e.k0s(),e.j41(12,"mat-icon",5),e.EFF(13,"search"),e.k0s()(),e.DNE(14,Re,4,0,"div",6)(15,$e,2,1,"div",7)(16,Te,9,0,"div",6)(17,Qe,20,5,"div",8),e.k0s()),2&o&&(e.R7$(14),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error&&!n.loading),e.R7$(),e.Y8G("ngIf",!n.loading&&!n.error&&0===n.productions.length),e.R7$(),e.Y8G("ngIf",!n.loading&&!n.error&&n.productions.length>0))},dependencies:[l.YU,l.bT,p.$z,p.iY,C.rl,C.nJ,C.yw,b.An,L.fg,G.iy,_.LG,y.B4,y.aE,g.Zl,g.tL,g.ji,g.cC,g.YV,g.iL,g.KS,g.$R,g.YZ,g.NB,E.oV,l.vh]})}}return i})();var N=u(5084),Je=u(2798),Ke=u(6600);function Ze(i,d){1&i&&(e.j41(0,"div",10),e.nrm(1,"mat-spinner",11),e.j41(2,"p",12),e.EFF(3,"Loading production data..."),e.k0s()())}function We(i,d){if(1&i&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.error," ")}}function et(i,d){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Title is required"),e.k0s())}function tt(i,d){if(1&i&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&i){const t=d.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function nt(i,d){1&i&&e.nrm(0,"mat-spinner",32)}function ot(i,d){if(1&i){const t=e.RV6();e.j41(0,"form",14),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.j41(1,"div",15)(2,"mat-form-field",16)(3,"mat-label"),e.EFF(4,"Title"),e.k0s(),e.nrm(5,"input",17),e.DNE(6,et,2,0,"mat-error",18),e.k0s()(),e.j41(7,"div",15)(8,"mat-form-field",16)(9,"mat-label"),e.EFF(10,"Description"),e.k0s(),e.nrm(11,"textarea",19),e.k0s()(),e.j41(12,"div",15)(13,"mat-form-field",16)(14,"mat-label"),e.EFF(15,"Status"),e.k0s(),e.j41(16,"mat-select",20),e.DNE(17,tt,2,2,"mat-option",21),e.k0s()()(),e.j41(18,"div",22)(19,"div",23)(20,"mat-form-field",16)(21,"mat-label"),e.EFF(22,"Start Date"),e.k0s(),e.nrm(23,"input",24)(24,"mat-datepicker-toggle",25)(25,"mat-datepicker",null,0),e.k0s()(),e.j41(27,"div",23)(28,"mat-form-field",16)(29,"mat-label"),e.EFF(30,"End Date"),e.k0s(),e.nrm(31,"input",26)(32,"mat-datepicker-toggle",25)(33,"mat-datepicker",null,1),e.k0s()()(),e.j41(35,"div",27)(36,"button",28),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.cancel())}),e.EFF(37,"Cancel"),e.k0s(),e.j41(38,"button",29),e.DNE(39,nt,1,0,"mat-spinner",30),e.EFF(40),e.k0s()()()}if(2&i){let t;const o=e.sdS(26),n=e.sdS(34),s=e.XpG();e.Y8G("formGroup",s.productionForm),e.R7$(6),e.Y8G("ngIf",null==(t=s.productionForm.get("title"))||null==t.errors?null:t.errors.required),e.R7$(11),e.Y8G("ngForOf",s.statusOptions),e.R7$(6),e.Y8G("matDatepicker",o),e.R7$(),e.Y8G("for",o),e.R7$(7),e.Y8G("matDatepicker",n),e.R7$(),e.Y8G("for",n),e.R7$(6),e.Y8G("disabled",s.productionForm.invalid||s.submitting),e.R7$(),e.Y8G("ngIf",s.submitting),e.R7$(),e.SpI(" ",s.isEditMode?"Update":"Create"," ")}}let A=(()=>{class i{constructor(t,o,n,s,r){this.fb=t,this.productionService=o,this.route=n,this.router=s,this.snackBar=r,this.isEditMode=!1,this.productionId=null,this.loading=!1,this.submitting=!1,this.error="",this.statusOptions=[{value:"development",label:"Development"},{value:"pre-production",label:"Pre-Production"},{value:"active",label:"Active"},{value:"post-production",label:"Post-Production"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}ngOnInit(){this.initForm(),this.route.paramMap.subscribe(t=>{const o=t.get("id");o&&(this.isEditMode=!0,this.productionId=+o,this.loadProductionData(+o))})}initForm(){this.productionForm=this.fb.group({title:["",[c.k0.required]],description:[""],status:["development",[c.k0.required]],startDate:[""],endDate:[""]})}loadProductionData(t){this.loading=!0,this.productionService.getProduction(t).subscribe({next:o=>{this.productionForm.patchValue({title:o.title,description:o.description,status:o.status,startDate:o.startDate,endDate:o.endDate}),this.loading=!1},error:o=>{this.error=o.message||"Failed to load production data",this.loading=!1,this.snackBar.open(this.error,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}onSubmit(){if(this.productionForm.invalid)return;this.submitting=!0;const t=this.productionForm.value;this.isEditMode&&this.productionId?this.productionService.updateProduction(this.productionId,t).subscribe({next:o=>{this.snackBar.open("Production updated successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/productions",o.id])},error:o=>{this.handleSubmitError(o)}}):this.productionService.createProduction(t).subscribe({next:o=>{this.snackBar.open("Production created successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/productions",o.id])},error:o=>{this.handleSubmitError(o)}})}handleSubmitError(t){this.submitting=!1,this.snackBar.open(t.error?.message||"An error occurred while saving the production","Close",{duration:5e3,panelClass:["error-snackbar"]})}cancel(){this.router.navigate(this.isEditMode&&this.productionId?["/productions",this.productionId]:["/productions"])}static{this.\u0275fac=function(o){return new(o||i)(e.rXU(c.ok),e.rXU(v),e.rXU(f.nX),e.rXU(f.Ix),e.rXU(h.UG))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-production-form"]],decls:9,vars:4,consts:[["startDatePicker",""],["endDatePicker",""],[1,"container","mt-4"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"text-center","my-5"],["diameter","50",1,"mx-auto"],[1,"mt-3"],[1,"alert","alert-danger"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["appearance","outline",1,"w-100"],["matInput","","formControlName","title","placeholder","Production Title","required",""],[4,"ngIf"],["matInput","","formControlName","description","placeholder","Production description","rows","4"],["formControlName","status","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-6","mb-3"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"matDatepicker"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["mat-stroked-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20","class","me-2",4,"ngIf"],[3,"value"],["diameter","20",1,"me-2"]],template:function(o,n){1&o&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2",5),e.EFF(4),e.k0s()(),e.j41(5,"div",6),e.DNE(6,Ze,4,0,"div",7)(7,We,2,1,"div",8)(8,ot,41,10,"form",9),e.k0s()()()),2&o&&(e.R7$(4),e.SpI("",n.isEditMode?"Edit":"New"," Production"),e.R7$(2),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.error&&!n.loading),e.R7$(),e.Y8G("ngIf",!n.loading))},dependencies:[l.Sq,l.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.j4,c.JD,p.$z,N.Vh,N.bZ,N.bU,C.rl,C.nJ,C.TL,C.yw,L.fg,_.LG,Je.VO,Ke.wT]})}}return i})();const it=[{path:"",component:ze},{path:"new",component:A},{path:":id",component:D,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:Be},{path:"breakdown",component:je},{path:"budget",component:qe}]},{path:":id/edit",component:A}];let st=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[l.MD,c.X1,W.G,f.iI.forChild(it),D,q]})}}return i})()}}]);